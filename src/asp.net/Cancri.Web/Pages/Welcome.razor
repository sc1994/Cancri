@using Microsoft.Extensions.Logging;
@using Cancri.Web.Store;

@page "/"
@inject ILogger<DownloadManage> logger;
@inject DownloadManageStore store;
@inject MessageService message

<PageContainer Title="欢迎">
    <AntDesign.Input @bind-Value="downloadRootPath" OnPressEnter="setRootPath" Placeholder="设置下载目录的绝对路径, 回车确认">
        <AddOnBefore>设置下载目录</AddOnBefore>
    </AntDesign.Input>
</PageContainer>

@code{
    string downloadRootPath = "";

    private async void setRootPath(EventArgs e)
    {
        await this.store.SetRootPath(downloadRootPath);

        await this.message.Success("设置成功");
    }

    protected override async Task OnInitializedAsync()
    {
        this.downloadRootPath = await this.store.GetRootPath();

        await base.OnInitializedAsync();
    } 
}
